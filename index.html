<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EchoSearch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script async src="https://cse.google.com/cse.js?cx=8504b5117a0734987"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #00cec9;
      --bg: #ffffff;
      --text: #000000;
    }
    body.dark {
      --bg: #121212;
      --text: #f4f4f4;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    header {
      text-align: center;
      padding: 2rem 1rem 1rem;
    }
    .logo {
      font-family: 'Pacifico', cursive;
      font-size: 3rem;
      color: var(--accent);
    }
    .search-container {
      max-width: 700px;
      margin: auto;
      text-align: center;
      padding: 1rem;
    }
    input[type="search"] {
      padding: 10px;
      font-size: 1rem;
      width: 60%;
      max-width: 400px;
      border-radius: 30px;
      border: 2px solid var(--accent);
    }
    .buttons {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    button {
      padding: 10px 20px;
      background: var(--accent);
      border: none;
      color: white;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
    }
    .voice-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--accent);
      border: none;
    }
    .voice-btn svg {
      width: 24px;
      height: 24px;
      fill: white;
    }
    .toggle-dark, .theme-select {
      position: fixed;
      top: 1rem;
      right: 1rem;
    }
    .theme-select {
      top: 3.5rem;
    }
    #results {
      margin: 2rem auto;
      max-width: 900px;
      padding: 1rem;
    }
  </style>
</head>
<body>
  <button class="toggle-dark" onclick="toggleDark()">üåô Dark Mode</button>
  <div class="theme-select">
    <select onchange="changeTheme(this.value)">
      <option value="">üé® Theme</option>
      <option value="default">Default</option>
      <option value="dark">Dark</option>
    </select>
  </div>

  <header>
    <div class="logo">EchoSearch</div>
  </header>

  <div class="search-container">
    <input type="search" id="searchInput" placeholder="Search..." />
    <button class="voice-btn" id="voiceBtn" title="Voice input">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 0 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zM11 18.93v2.07h2v-2.07a7.001 7.001 0 0 0 5.75-6.84h-2a5.002 5.002 0 0 1-9.5 0H5.25a7 7 0 0 0 5.75 6.84z"/>
      </svg>
    </button>

    <div class="buttons">
      <button onclick="handleSearch()">Search</button>
      <button onclick="surprise()">üé≤ Surprise Me</button>
    </div>
  </div>

  <div id="results">
    <div class="gcse-searchresults-only"></div>
  </div>

  <script>
    // Voice Search
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-US';
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        document.getElementById('searchInput').value = transcript;
        handleSearch();
      };
      document.getElementById('voiceBtn').onclick = () => recognition.start();
    }

    // Surprise facts
    function surprise() {
      const facts = [
        "Sharks existed before trees.",
        "Octopuses have three hearts.",
        "You blink 20 times a minute.",
        "Your brain uses 20% of your body's energy.",
        "Bananas are radioactive."
      ];
      alert(facts[Math.floor(Math.random() * facts.length)]);
    }

    // Toggle Dark Mode
    function toggleDark() {
      document.body.classList.toggle("dark");
    }

    function changeTheme(value) {
      document.body.className = value === "dark" ? "dark" : "";
    }

    // Run search or calculator
    function handleSearch() {
      const q = document.getElementById("searchInput").value.trim();
      if (!q) return;

      // If it's a math expression, calculate it
      try {
        if (/^[\d\s\+\-\*\/ÓÄÅÓÄÅ\.]+$/.test(q)) {
          const result = eval(q);
          alert("Calculator result: " + result);
          return;
        }
      } catch {}

      // Else do normal search
      google.search.cse.element.getElement("results").execute(q);
    }

    // Render Google CSE
    window.__gcse = {
      callback: function () {
        google.search.cse.element.render({
          div: "results",
          tag: "searchresults-only"
        });
      }
    };
  </script>
</body>
</html>
